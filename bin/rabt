#!/usr/bin/env node

var fs = require('fs');
var cmdr = require('commander');

require('iced-coffee-script');

cmdr
	.version(fs.readFileSync(__dirname + '/../lib/VERSION', "utf8"))
	.option('-u', '--username [username]', '[Server] Specifies the username')
	.option('-p', '--password [password]', '[Server] Specifies the password')
	.option('-s', '--server [rally server]', '[Server] Specifies the server to connect to.  Default: rally1')
	.option('-o', '--offline', '[Server] Sets the server to offline mode.  All queries will return cached values')
	.option('-r', '--port [port]', '[Server] Specifies the password', parseInt)

	.option('-a', '--package [package]', '[New] Specifies the app package.  Default: app')
	.option('-l', '--language [language]', '[New] Specifies the default language for the app.  Default: javascript');

cmdr
	.command('new [project]')
	.description("Creates a new Rabt project")
	.action(function() {
		require('./rabt-new').run();
	});

cmdr
	.command('server')
	.description("Starts a web server to host your App.  Also caches requests for offline development")
	.action(function() {
		require('./rabt-server').run();
	});

cmdr.parse(process.argv);

//validCommands = ['new', 'server'];

//command = process.argv[2];
//process.argv.splice(2, 1);

//require("./rabt-" + command).run();